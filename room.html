<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Room Page</title>
     <link rel="stylesheet" href="RoomPage.css">
     <script src="https://cdn.zegocloud.com/zego-uikit-prebuilt/latest/index.min.js"></script>
</head>

<body>
     <div id="meeting-container" style="width: 100%; height: 100vh;"></div>

     <script>
          document.addEventListener("DOMContentLoaded", async () => {
               try {
                    const urlParams = new URLSearchParams(window.location.search);
                    const roomId = urlParams.get('roomId');

                    if (!roomId) {
                         alert("Room ID is missing");
                         return;
                    }

                    const appId = 1175447220;
                    const serverSecret = "e5a9bf74965e6ec9659a9975372366e6";
                    const userId = Date.now().toString();  // Unique user ID
                    const userName = "MindFulHaven";       // Change this as needed

                    // Generate the kit token
                    const kitToken = ZegoUIKitPrebuilt.generateKitTokenForTest(
                         appId,
                         serverSecret,
                         roomId,
                         userId,
                         userName
                    );

                    // Create the ZegoUIKitPrebuilt instance
                    const zc = ZegoUIKitPrebuilt.create(kitToken);

                    // Join the room
                    zc.joinRoom({
                         container: document.getElementById('meeting-container'),
                         scenario: {
                              mode: ZegoUIKitPrebuilt.OneONoneCall,
                         },
                         showScreenSharingButton: false,
                    });
               } catch (error) {
                    console.error("Error joining the room:", error);
                    alert("Failed to join the room. Please try again.");
               }
          });
     </script>
</body>

</html>